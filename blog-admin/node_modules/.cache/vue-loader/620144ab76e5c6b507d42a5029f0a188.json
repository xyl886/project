{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\product\\blog-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\product\\blog-admin\\src\\views\\site\\album\\album.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\product\\blog-admin\\src\\views\\site\\album\\album.vue","mtime":1686703246000},{"path":"C:\\Users\\Administrator\\Desktop\\product\\blog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689641835446},{"path":"C:\\Users\\Administrator\\Desktop\\product\\blog-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1689641839258},{"path":"C:\\Users\\Administrator\\Desktop\\product\\blog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689641835446},{"path":"C:\\Users\\Administrator\\Desktop\\product\\blog-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1689641841369}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZldGNoQWxidW0sIHJlbW92ZSwgYWRkQWxidW0sIHVwZGF0ZUFsYnVtLCBpbmZvIH0gZnJvbSAnQC9hcGkvcGhvdG9BbGJ1bScKaW1wb3J0IHsgdXBsb2FkIH0gZnJvbSAnQC9hcGkvaW1nVXBsb2FkJwppbXBvcnQgeyByZW1vdmVQYWdlIH0gZnJvbSAnQC9hcGkvcGFnZScKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnCmltcG9ydCB7IGhhc0F1dGggfSBmcm9tICdAL3V0aWxzL2F1dGgnCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIGltZ0xvYWRpbmc6IGZhbHNlLAogICAgICBpbWc6IHByb2Nlc3MuZW52LlZVRV9BUFBfSU1HX0FQSSwKICAgICAgdXBsb2FkUGljdHVyZUhvc3Q6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAnL2ZpbGUvdXBsb2FkJywKICAgICAgaXNFZGl0Rm9ybTogZmFsc2UsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhbGJ1bUZvcnVtOiB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgaW5mbzogJycsCiAgICAgICAgY292ZXI6ICcnLAogICAgICAgIHN0YXR1czogMAogICAgICB9LAogICAgICBwYXJhbXM6IHsKICAgICAgICBwYWdlTm86IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIG5hbWU6IG51bGwKICAgICAgfSwKICAgICAgYWxidW1MaXN0OiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIHRpdGxlOiBudWxsLAogICAgICBydWxlczogewogICAgICAgICduYW1lJzogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflv4XloavlrZfmrrUnLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgJ2NvdmVyJzogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflv4XloavlrZfmrrUnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwKICAgICAgICAnaW5mbyc6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5b+F5aGr5a2X5q61JywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgICdzdGF0dXMnOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+W/heWhq+Wtl+autScsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dCiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgJ3ByZXMnCiAgICBdKSwKICAgIGNhbkFkZDogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBoYXNBdXRoKHRoaXMucHJlcywgJy9zeXN0ZW0vYWxidW0vYWRkJykKICAgIH0sCiAgICBjYW5EZWw6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gaGFzQXV0aCh0aGlzLnByZXMsICcvc3lzdGVtL2FsYnVtL2RlbGV0ZScpCiAgICB9LAogICAgY2FuVXBkYXRlOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGhhc0F1dGgodGhpcy5wcmVzLCAnL3N5c3RlbS9hbGJ1bS91cGRhdGUnKQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubGlzdEFsYnVtcygpCiAgfSwKICBtZXRob2RzOiB7CiAgICBsaXN0QWxidW1zOiBmdW5jdGlvbigpIHsKICAgICAgZmV0Y2hBbGJ1bSh0aGlzLnBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuYWxidW1MaXN0ID0gcmVzLmRhdGEucmVjb3JkcwogICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbAogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgc3VibWl0OiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy4kcmVmc1snZGF0YUZvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmICh0aGlzLmlzRWRpdEZvcm0pIHsKICAgICAgICAgICAgdXBkYXRlQWxidW0odGhpcy5hbGJ1bUZvcnVtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv67mlLnnm7jlhozmiJDlip8nKQogICAgICAgICAgICAgIHRoaXMubGlzdEFsYnVtcygpCiAgICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhZGRBbGJ1bSh0aGlzLmFsYnVtRm9ydW0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOebuOWGjOaIkOWKnycpCiAgICAgICAgICAgICAgdGhpcy5saXN0QWxidW1zKCkKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WtmOWcqOW/heWhq+Wtl+auteacquWhqycpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUFkZDogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuYWxidW1Gb3J1bSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBpbmZvOiAnJywKICAgICAgICBjb3ZlcjogJycsCiAgICAgICAgc3RhdHVzOiAwCiAgICAgIH0KICAgICAgdGhpcy50aXRsZSA9ICfmlrDlu7rnm7jlhownCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICBoYW5kbGVFZGl0OiBmdW5jdGlvbigpIHsKICAgICAgaW5mbyh0aGlzLmFsYnVtRm9ydW0uaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmFsYnVtRm9ydW0gPSByZXMuZGF0YQogICAgICB9KQogICAgICB0aGlzLnRpdGxlID0gJ+S/ruaUueebuOWGjCcKICAgICAgdGhpcy5pc0VkaXRGb3JtID0gdHJ1ZQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgY2hlY2tQaG90bzogZnVuY3Rpb24oaXRlbSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvcGhvdG9zJywgcXVlcnk6IHsgYWxidW1JZDogaXRlbS5pZCB9fSkKICAgIH0sCiAgICBiZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmltZ0xvYWRpbmcgPSB0cnVlCiAgICB9LAogICAgdXBsb2FkU2VjdGlvbkZpbGU6IGZ1bmN0aW9uKHBhcmFtKSB7CiAgICAgIHRoaXMuZmlsZXMgPSBwYXJhbS5maWxlCiAgICAgIC8vIEZvcm1EYXRhIOWvueixoQogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICAvLyDmlofku7blr7nosaEKICAgICAgZm9ybURhdGEuYXBwZW5kKCdtdWx0aXBhcnRGaWxlJywgdGhpcy5maWxlcykKICAgICAgdXBsb2FkKGZvcm1EYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5hbGJ1bUZvcnVtLmNvdmVyID0gcmVzLmRhdGEKICAgICAgICB0aGlzLmltZ0xvYWRpbmcgPSBmYWxzZQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUNvbW1hbmQ6IGZ1bmN0aW9uKGNvbW1hbmQpIHsKICAgICAgY29uc3QgdHlwZSA9IGNvbW1hbmQuc3Vic3RyaW5nKDAsIDYpCiAgICAgIHRoaXMuYWxidW1Gb3J1bS5pZCA9IGNvbW1hbmQuc3Vic3RyaW5nKDYpCiAgICAgIGlmICh0eXBlID09PSAnZGVsZXRlJykgewogICAgICAgIHRoaXMuZGVsZXRlQWxidW0oKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaGFuZGxlRWRpdCgpCiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVBbGJ1bTogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuaKiumhtemdouWIoOmZpCwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICByZW1vdmUodGhpcy5hbGJ1bUZvcnVtLmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOebuOWGjOaIkOWKnycpCiAgICAgICAgICB0aGlzLmxpc3RBbGJ1bXMoKQogICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5Y+W5raI5Yig6ZmkJykKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVGaW5kOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5wYXJhbXMucGFnZU5vID0gMQogICAgICB0aGlzLmxpc3RBbGJ1bXMoKQogICAgfSwKICAgIHNpemVDaGFuZ2U6IGZ1bmN0aW9uKHNpemUpIHsKICAgICAgdGhpcy5wYXJhbXMucGFnZVNpemUgPSBzaXplCiAgICAgIHRoaXMubGlzdEFsYnVtcygpCiAgICB9LAogICAgY3VycmVudENoYW5nZTogZnVuY3Rpb24oY3VycmVudCkgewogICAgICB0aGlzLnBhcmFtcy5wYWdlTm8gPSBjdXJyZW50CiAgICAgIHRoaXMubGlzdEFsYnVtcygpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["album.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"album.vue","sourceRoot":"src/views/site/album","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card class=\"main-card\">\n      <!-- 标题 -->\n      <div style=\"margin-bottom: 10px\" class=\"operation-container\">\n        <el-input\n          v-model=\"params.name\"\n          prefix-icon=\"el-icon-search\"\n          size=\"small\"\n          placeholder=\"请输入相册名\"\n          style=\"width:200px\"\n          @keyup.enter.native=\"handleFind\"\n        />\n        <el-button\n          type=\"primary\"\n          size=\"small\"\n          icon=\"el-icon-search\"\n          style=\"margin-left:1rem\"\n          @click=\"handleFind\"\n        >\n          搜索\n        </el-button>\n        <el-button\n          v-if=\"canAdd\"\n          type=\"primary\"\n          size=\"small\"\n          icon=\"el-icon-plus\"\n          @click=\"handleAdd()\"\n        >\n          新建相册\n        </el-button>\n\n      </div>\n      <!-- 相册列表 -->\n      <el-row v-loading=\"loading\" class=\"album-container\" :gutter=\"12\">\n        <!-- 空状态 -->\n        <el-empty v-if=\"albumList == null\" description=\"暂无相册\" />\n        <el-col v-for=\"item of albumList\" :key=\"item.id\" :md=\"6\">\n          <div class=\"album-item\" @click=\"checkPhoto(item)\">\n            <!-- 相册操作 -->\n            <div class=\"album-opreation\">\n              <el-dropdown @command=\"handleCommand\">\n                <i class=\"el-icon-more\" style=\"color:#fff\" />\n                <el-dropdown-menu slot=\"dropdown\">\n                  <el-dropdown-item v-if=\"canUpdate\" :command=\"'update' + item.id\">\n                    <i class=\"el-icon-edit\" />编辑\n                  </el-dropdown-item>\n                  <el-dropdown-item v-if=\"canDel\" :command=\"'delete' + item.id\">\n                    <i class=\"el-icon-delete\" />删除\n                  </el-dropdown-item>\n                </el-dropdown-menu>\n              </el-dropdown>\n            </div>\n            <div class=\"album-photo-count\">\n              <div>{{ item.photoCount }}</div>\n              <i v-if=\"item.status === 2\" class=\"iconfont el-icon-mymima\" />\n            </div>\n            <el-image fit=\"cover\" class=\"album-cover\" :src=\"item.cover\" />\n            <div class=\"album-name\">{{ item.name }}</div>\n          </div>\n        </el-col>\n      </el-row>\n      <!-- 分页 -->\n      <el-pagination\n        :hide-on-single-page=\"true\"\n        class=\"pagination-container\"\n        :current-page=\"params.pageNo\"\n        :page-size=\"params.pageSize\"\n        :total=\"total\"\n        layout=\"total, sizes,prev, pager, next,jumper\"\n        @size-change=\"sizeChange\"\n        @current-change=\"currentChange\"\n      />\n      <!-- 新增模态框 -->\n      <el-dialog center :title=\"title\" :visible.sync=\"dialogVisible\" width=\"35%\" top=\"10vh\">\n        <el-form ref=\"dataForm\" :rules=\"rules\" label-width=\"80px\" size=\"medium\" :model=\"albumForum\">\n          <el-form-item label=\"相册名称\" prop=\"name\">\n            <el-input v-model=\"albumForum.name\" style=\"width:220px\" />\n          </el-form-item>\n          <el-form-item label=\"相册描述\" prop=\"info\">\n            <el-input v-model=\"albumForum.info\" style=\"width:220px\" />\n          </el-form-item>\n          <el-form-item label=\"相册封面\" prop=\"cover\">\n            <el-upload\n              v-loading=\"imgLoading\"\n              class=\"upload-cover\"\n              drag\n              :show-file-list=\"false\"\n              multiple\n              :action=\"uploadPictureHost\"\n              :before-upload=\"beforeUpload\"\n              :http-request=\"uploadSectionFile\"\n            >\n              <i v-if=\"albumForum.cover === ''\" class=\"el-icon-upload\" />\n              <div v-if=\"albumForum.cover === ''\" class=\"el-upload__text\">\n                将文件拖到此处，或<em>点击上传</em>\n              </div>\n              <img\n                v-else\n                :src=\"albumForum.cover\"\n                width=\"360px\"\n                height=\"180px\"\n              >\n            </el-upload>\n          </el-form-item>\n          <el-form-item label=\"发布形式\" prop=\"status\">\n            <el-radio-group v-model=\"albumForum.status\">\n              <el-radio :label=\"0\">公开</el-radio>\n              <el-radio :label=\"1\">私密</el-radio>\n            </el-radio-group>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\">\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"submit\"> 确定</el-button>\n        </div>\n      </el-dialog>\n    </el-card>\n\n  </div>\n</template>\n<script>\nimport { fetchAlbum, remove, addAlbum, updateAlbum, info } from '@/api/photoAlbum'\nimport { upload } from '@/api/imgUpload'\nimport { removePage } from '@/api/page'\nimport { mapGetters } from 'vuex'\nimport { hasAuth } from '@/utils/auth'\nexport default {\n  data: function() {\n    return {\n      loading: true,\n      imgLoading: false,\n      img: process.env.VUE_APP_IMG_API,\n      uploadPictureHost: process.env.VUE_APP_BASE_API + '/file/upload',\n      isEditForm: false,\n      dialogVisible: false,\n      albumForum: {\n        id: null,\n        name: '',\n        info: '',\n        cover: '',\n        status: 0\n      },\n      params: {\n        pageNo: 1,\n        pageSize: 10,\n        name: null\n      },\n      albumList: [],\n      total: 0,\n      title: null,\n      rules: {\n        'name': [{ required: true, message: '必填字段', trigger: 'blur' }],\n        'cover': [{ required: true, message: '必填字段', trigger: 'change' }],\n        'info': [{ required: true, message: '必填字段', trigger: 'blur' }],\n        'status': [{ required: true, message: '必填字段', trigger: 'change' }]\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'pres'\n    ]),\n    canAdd: function() {\n      return hasAuth(this.pres, '/system/album/add')\n    },\n    canDel: function() {\n      return hasAuth(this.pres, '/system/album/delete')\n    },\n    canUpdate: function() {\n      return hasAuth(this.pres, '/system/album/update')\n    }\n  },\n  created() {\n    this.listAlbums()\n  },\n  methods: {\n    listAlbums: function() {\n      fetchAlbum(this.params).then(res => {\n        this.albumList = res.data.records\n        this.total = res.data.total\n        this.loading = false\n      })\n    },\n    submit: function() {\n      this.$refs['dataForm'].validate((valid) => {\n        if (valid) {\n          if (this.isEditForm) {\n            updateAlbum(this.albumForum).then(res => {\n              this.$message.success('修改相册成功')\n              this.listAlbums()\n              this.dialogVisible = false\n            }).catch(err => {\n              console.log(err)\n            })\n          } else {\n            addAlbum(this.albumForum).then(res => {\n              this.$message.success('添加相册成功')\n              this.listAlbums()\n              this.dialogVisible = false\n            }).catch(err => {\n              console.log(err)\n            })\n          }\n          this.dialogVisible = false\n        } else {\n          this.$message.error('存在必填字段未填')\n        }\n      })\n    },\n    handleAdd: function() {\n      this.albumForum = {\n        id: null,\n        name: '',\n        info: '',\n        cover: '',\n        status: 0\n      }\n      this.title = '新建相册'\n      this.dialogVisible = true\n    },\n    handleEdit: function() {\n      info(this.albumForum.id).then(res => {\n        this.albumForum = res.data\n      })\n      this.title = '修改相册'\n      this.isEditForm = true\n      this.dialogVisible = true\n    },\n    checkPhoto: function(item) {\n      this.$router.push({ path: '/photos', query: { albumId: item.id }})\n    },\n    beforeUpload: function() {\n      this.imgLoading = true\n    },\n    uploadSectionFile: function(param) {\n      this.files = param.file\n      // FormData 对象\n      var formData = new FormData()\n      // 文件对象\n      formData.append('multipartFile', this.files)\n      upload(formData).then(res => {\n        this.albumForum.cover = res.data\n        this.imgLoading = false\n      })\n    },\n    handleCommand: function(command) {\n      const type = command.substring(0, 6)\n      this.albumForum.id = command.substring(6)\n      if (type === 'delete') {\n        this.deleteAlbum()\n      } else {\n        this.handleEdit()\n      }\n    },\n    deleteAlbum: function() {\n      this.$confirm('此操作将把页面删除, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        remove(this.albumForum.id).then(res => {\n          this.$message.success('删除相册成功')\n          this.listAlbums()\n        }).catch(err => {\n          console.log(err)\n        })\n      }).catch(() => {\n        this.$message.info('取消删除')\n      })\n    },\n    handleFind: function() {\n      this.params.pageNo = 1\n      this.listAlbums()\n    },\n    sizeChange: function(size) {\n      this.params.pageSize = size\n      this.listAlbums()\n    },\n    currentChange: function(current) {\n      this.params.pageNo = current\n      this.listAlbums()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.album-cover {\n  position: relative;\n  border-radius: 4px;\n  width: 100%;\n  height: 170px;\n}\n.album-cover::before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n}\n.album-photo-count {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 1.5rem;\n  z-index: 1000;\n  position: absolute;\n  left: 0;\n  right: 0;\n  padding: 0 0.5rem;\n  bottom: 2.6rem;\n  color: #fff;\n}\n.album-name {\n  text-align: center;\n  margin-top: 0.5rem;\n}\n.album-item {\n  position: relative;\n  cursor: pointer;\n  margin-bottom: 1rem;\n}\n.album-opreation {\n  position: absolute;\n  z-index: 1000;\n  top: 0.5rem;\n  right: 0.8rem;\n}\n</style>\n"]}]}